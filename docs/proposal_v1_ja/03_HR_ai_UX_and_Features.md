# **HR.ai: UX STRATEGY & ADVANCED FEATURES**

本文書は HR.ai コンセプトを拡張し、運用開始時に直面する UX、技術、およびデータガバナンスに関する現実的な課題の解決に焦点を当てています。

## **1. UX/UI: 「チャットボット」から「データアシスタント」へ**

ユーザーに目的なく「チャット」させたくありません。UX は正確な指示を出せるようにユーザーを導く必要があります。

### **1.1. 「スマートコマンドバー (Smart Command Bar)」**

隅にある小さなチャットボックス（サポート用のような）ではなく、これを中心的な機能にします（Google検索やMacOSのSpotlightのように）。

*   **配置:** ダッシュボードの最上部に配置するか、ショートカットキー `Ctrl + K` で呼び出します。
*   **Autosuggest (スマートサジェスト):**
    *   ユーザーが「売上...」と入力すると、システムは即座に提案します：*「月次売上」、「前年同期比売上」。*
    *   履歴に基づいて：*「先週のレポートを再度作成しますか？」*
*   **多様な入力:** 移動中のリーダーやモバイルアプリ利用者のために、音声入力（Voice-to-Text）をサポートします。

### **1.2. 「Exploration Mode (探索モード)」**

AIが結果（例：棒グラフ）を返した後、ユーザーはそのグラフ上でさらに操作を行えます：

*   **Drill-down (ドリルダウン):** 「10月」のバーをクリック -> AIが自動的に理解し、詳細をクエリします *「10月の従業員リスト」。*
*   **Pivot/Switch:** ビューを素早く切り替えるボタン：「部門別で見る」<->「プロジェクト別で見る」。

### **1.3. 「Human-in-the-loop (人間による確認)」**

*   最終結果を表示する前に、AIはロジックの自然言語による説明を表示します：
    *   *AI:* 「**APIソース**のデータで、ステータスが**承認済み**、かつ**2024年11月**の従業員を検索しています。これでよろしいですか？」
    *   *User:* 「はい」または「いいえ、未承認も含めてください」。

## **2. 技術: 困難なケースの処理 (Edge Cases)**

### **2.1. 「データ非同期」問題 (Data Consistency)**

*   **状況:** 他部署からのAPI連携が遅延している、またはインポートされたCSVの日付フォーマットにエラーがある。
*   **AIソリューション:**
    *   ユーザーが今月の数値を尋ねた際、APIデータソースに過去3日間のレコードがないことを検知した場合 -> AIが警告：*「注意：APIからのデータが最新ではない可能性があります（最終更新：3日前）。結果は不完全かもしれません。」*

### **2.2. 「曖昧な質問」問題 (Ambiguity)**

*   **状況:** ユーザーが「誰が一番優秀？」と尋ねる（「優秀」の定義が非常に曖昧）。
*   **AIソリューション:** 推測してはいけません。逆に質問（Clarification）します：
    *   *「『優秀』をどの基準で評価しますか？ (A) 労働時間の多さ、それとも (B) 遅刻/早退の少なさ？」*

### **2.3. 「行レベルのセキュリティ」問題 (Row-Level Security - RLS)**

*   **課題:** 部長Aは、部Bの給与/勤怠を見てはいけない。
*   **ソリューション:**
    *   System Prompt に常に環境変数 `CURRENT_USER_DEPT_ID` を注入する。
    *   生成されるSQLは常に `WHERE department_id = 'USER_DEPT_ID'` を自動的に挿入する。
    *   ミドルウェア層で、機密テーブル（`users_passwords` や `salary_config` など）へのクエリをブロックする。

## **3. 機能拡張: "Proactive AI" (能動的 AI)**

ユーザーの質問を待つことなく、AIが自動的にサービスを提供します：

### **3.1. Smart Alerts (スマートアラート)**

*   ユーザーが勤怠を一行ずつチェックする代わりに、AIが夜間にバックグラウンドジョブを実行します。
*   **Use case:**
    *   *「過去3日間連続で1日12時間以上労働している従業員を5名検知しました。バーンアウト（燃え尽き症候群）のリスクがあります。」* -> HRに通知。
    *   *「本日のCSVインポートデータに、手入力データと重複する行が20件検知されました。」* -> Adminに通知。

### **3.2. Automated Timesheet Approval (勤怠自動承認)**

*   AIが勤怠パターンを分析します。
*   「通常」の勤怠（定時、正しい場所、履歴と一致） -> AIが **自動承認 (Auto-Approve)** を提案。
*   「異常」な勤怠（時間外、見慣れないIP、過剰な労働時間） -> AIがリーダー向けに **「要確認 (Need Review)」** フラグを立てる。
    *   *メリット:* リーダーの手動承認時間を90%削減。

## **4. 実装チェックリスト (Next Steps)**

1.  **Data Cleaning:**
    *   3つのデータソース（Manual, CSV, API）を再確認。AIに学習させる前に、日付や従業員IDのフォーマットが統一されていることを保証する。
2.  **Define Metrics:**
    *   各指標の定義を統一：「標準労働時間」、「残業(OT)」、「遅刻」、「休暇」。メタデータに記述する。
3.  **Prototype UI:**
    *   検索バーを中心とした新しいダッシュボード画面のワイヤーフレームを作成する。

---
**戻る:** [システム設計 (System Design)](./02_HR_ai_System_Design.md)
